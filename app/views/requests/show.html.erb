<p id="notice"><%= notice %></p>

<p>
  <b>Id:</b>
  <%= @request.id %>
</p>

<p>
  <b>Title:</b>
  <%= @request.title %>
</p>

<p>
  <b>Category:</b>
  <%= @request.category %>
</p>

<p>
  <b>Description:</b>
  <%= @request.description %>
</p>

<p>
  <b>Target date:</b>
  <%= @request.target_date %>
</p>

<p>
  <b>Size:</b>
  <%= @request.size %>
</p>

<p>
  <b>Status:</b>
  <%= @request.status %>
</p>

<p>
  <b>User:</b>
  <%= @request.user_id %>
</p>

<p>
  <b>Behalf of user:</b>
  <%= @request.behalf_of_user_id %>
</p>

<p>
  <b>Priority:</b>
  <%= @request.priority %>
</p>

<p>
  <b>Context:</b>
  <%= @request.context %>
</p>

<p>
  <b>Comments:</b>
  <% @request.request_comments.each do |request_comment| %>
  <div>
    <%= request_comment.created_at %>
    <%= request_comment.user_id %>
    <div>
      <%= request_comment.text %>
    </div>
    <!--<a href="#Team" role="button" class="btn" data-toggle="modal" data-remote="/request_comments/<%= request_comment.id %>/edit">Edit</a>-->
  </div>
  <% end %>

  <a href="#Comment" role="button" class="btn" data-toggle="modal" data-remote="/request_comments/new?request_id=<%= @request.id %> .container form">Add</a>
  
  <div id="Comment" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Request Comment</h3>
    </div>
    
    <div class="modal-body">
    </div>
    
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
      <button class="btn btn-primary">Save changes</button>
    </div>
  </div>
</p>

<p>
  <table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
        <th>
          Team
        </th>
        <th>
        </th>
      </tr>
    </thead>
    <tbody>
      <% @request.request_teams.each do |request_team| %>
      <tr>
        <td>
          <%= request_team.team.name %>
        </td>
        <td>
          <a href="#Team" role="button" class="btn" data-toggle="modal" data-remote="/request_teams/<%= request_team.id %>/edit .container form">Edit</a>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>

  <a href="#Team" role="button" class="btn" data-toggle="modal" data-remote="/request_teams/new?request_id=<%= @request.id %> .container form">Add</a>
  
  <div id="Team" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Request Team</h3>
    </div>
    
    <div class="modal-body">
    </div>
    
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
      <button class="btn btn-primary">Save changes</button>
    </div>
  </div>
</p>

<p>
  <table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
        <th>
          User
        </th>
        <th>
          Role
        </th>
        <th>
          Allocation
        </th>
        <th>
          Begin
        </th>
        <th>
          End
        </th>
        <th>
        </th>
      </tr>
    </thead>
    <tbody>
      <% @request.request_users.each do |request_user| %>
      <tr>
        <td>
          <%= request_user.user_id %>
        </td>
        <td>
          <%= request_user.role %>
        </td>
        <td>
          <%= request_user.allocation %>
        </td>
        <td>
          <%= request_user.begin %>
        </td>
        <td>
          <%= request_user.end %>
        </td>
        <td>
          <a href="#User" role="button" class="btn" data-toggle="modal" data-remote="/request_users/<%= request_user.id %>/edit .container form">Edit</a>
        </td>
        <% end %>
      </tbody>
    </table>

    <a href="#User" role="button" class="btn" data-toggle="modal" data-remote="/request_users/new?request_id=<%= @request.id %> .container form">Add</a>

    <div id="User" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Request User</h3>
      </div>

      <div class="modal-body">
      </div>

      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </p>

  <p>
    <b>Attachments:</b>
    <% @request.request_attachments.each do |request_attachment| %>
    <div>
      <%= link_to File.basename(request_attachment.attachment_url), request_attachment.attachment_url %>
      <a href="#Attachment" role="button" class="btn" data-toggle="modal" data-remote="/request_attachments/<%= request_attachment.id %>/edit .container form">Edit</a>
    </div>
    <% end %>

    <a href="#Attachment" role="button" class="btn" data-toggle="modal" data-remote="/request_attachments/new?request_id=<%= @request.id %> .container form">Add Attachment</a>

    <div id="Attachment" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Request Attachment</h3>
      </div>

      <div class="modal-body">
      </div>

      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </p>



  <%= link_to 'Edit', edit_request_path(@request) %> |
  <%= link_to 'Back', requests_path %>
